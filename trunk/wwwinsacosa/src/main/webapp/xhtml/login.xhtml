<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:a4j="http://richfaces.org/a4j" 
    xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
	
	
		<rich:popupPanel id="registrarte" autosized="true" modal="false"> 
  	   
	   	<f:facet name="header">   
	   		<h:panelGrid columns="2">          
		   		<h:outputText value="Registro usuario" />  
	   		</h:panelGrid>       
	   	</f:facet> 
	   	
	   	<f:facet name="controls">
	   		 
	   	</f:facet>  
	
		<ui:include src="useraccount.xhtml"/>
	
		<a4j:commandLink onclick="#{rich:component('registrarte')}.hide()"  value="cerrar"/>
						   
	</rich:popupPanel>  
	
	<rich:popupPanel id="olvidaste" autosized="true" modal="false"> 
  	   
	   	<f:facet name="header">   
	   		<h:panelGrid columns="2">          
		   		<h:outputText value="Olvidaste tu contrase単a" />  
	   		</h:panelGrid>       
	   	</f:facet> 
	   	
	   	<f:facet name="controls">
	   		 
	   	</f:facet>  
	
		<ui:include src="forgotpassword.xhtml"/>
	
		<a4j:commandLink onclick="#{rich:component('olvidaste')}.hide()"  value="cerrar"/>
						   
	</rich:popupPanel>  
	
	
	<rich:popupPanel id="editarPerfil" autosized="true" modal="false"> 
  	   
	   	<f:facet name="header">   
	   		<h:panelGrid columns="2">          
		   		<h:outputText value="Perfil de usuario" />  
	   		</h:panelGrid>       
	   	</f:facet> 
	   	
	   	<f:facet name="controls">
	   	</f:facet>  
	
		<ui:include src="useraccount.xhtml"/>
	
		<a4j:commandLink onclick="#{rich:component('editarPerfil')}.hide()"  value="cerrar"/>
						   
	</rich:popupPanel>  
	
	
	<rich:popupPanel id="cambiaPassword" autosized="true" modal="false"> 
  	   
	   	<f:facet name="header">   
	   		<h:panelGrid columns="2">          
		   		<h:outputText value="Cambiar contrase単a" />  
	   		</h:panelGrid>       
	   	</f:facet>   
	   	
		<f:facet name="controls">
	   		 
	   	</f:facet> 
	
		<ui:include src="changepassword.xhtml"/>
	
		<a4j:commandLink onclick="#{rich:component('cambiaPassword')}.hide()"  value="cerrar"/>
						   
	</rich:popupPanel> 
	
	

	<c:if test="#{not userForm.loginat}">
		
		<h:panelGrid  border="0" style="width:150px">
		
			<rich:panel header="Login">
			
				<h:form id="LoginForm">
				
					<h:graphicImage value="/images/usuari.jpg" border="0" style="width:60px;height:60px"/> 
			
					<h:outputText value="#{LoginForm.text}" />
					
					<h:panelGrid id="lpg" columns="2" >
					
						<h:outputText value="Usuario"/> 
						<h:inputText id="username" value="#{LoginForm.nomUsuari}" styleClass="inputbox">
							<f:validateLength minimum="3" maximum="8"/>                     
							<f:validateRequired />
							<rich:validator /> 
						</h:inputText>
						
						<h:outputText value=""/>
						<rich:message for="username" styleClass="errors"/> 
						
					

						<h:outputText value="Password"/> 
						<h:inputSecret id="password" value="#{LoginForm.password}" styleClass="inputbox"/>
						<h:outputText value=""/>
						<h:message for="password" styleClass="errors"/>
					

						<h:outputText value=""/>
						<h:commandButton value="Login" action="#{LoginForm.validUser}" styleClass="submitButton"/>
					</h:panelGrid>
					
				</h:form>
					
				<h:form>
					
					<h:panelGrid id="bottompg" columns="1" >
						<h:outputText value="Eres usuario nuevo?" style="COLOR: #004080;"/>
						
						<h:panelGroup>
							<a4j:commandLink value="Quieres registrarte" execute="@this"                  
				 			 render="@none" oncomplete="#{rich:component('registrarte')}.show()">                     
				    		</a4j:commandLink>    
						</h:panelGroup>
												
						<h:outputText value=""/>
						
						<h:panelGroup>
							<a4j:commandLink value="Olvidaste tu contrase単a?" execute="@this"                  
				 			 render="@none" oncomplete="#{rich:component('olvidaste')}.show()">                     
				    		</a4j:commandLink>    
						</h:panelGroup>
						
					</h:panelGrid>
					
				</h:form>
					
			</rich:panel>
			
		</h:panelGrid>
					
	</c:if>
				
	<c:if test="#{userForm.loginat}">
	
		<h:panelGrid  border="0" style="width:150px">
			
			<rich:panel header="#{userForm.nom} #{userForm.cognoms}">
				
				<h:form>	
					
					<h:graphicImage value="/images/usuari.jpg" border="0" style="width:60px;height:60px"/> 
					
					<h:panelGrid style="width:150px">
					
						<h:panelGroup>
							<a4j:commandLink value="Editar tu perfil" execute="@this"                  
				 			 render="@none" oncomplete="#{rich:component('editarPerfil')}.show()">                     
				    		</a4j:commandLink>    
						</h:panelGroup>
						
						<h:panelGroup>
							<a4j:commandLink value="Cambiar contrase単a" execute="@this"                  
				 				 render="@none" oncomplete="#{rich:component('cambiaPassword')}.show()">                     
				    		</a4j:commandLink> 
						</h:panelGroup>
						
						<h:panelGroup>			
							<h:commandLink value="Desconectar" action="#{LoginForm.logout}"/>
						</h:panelGroup>
						
						<h:panelGroup>	
							<h:commandLink value="Tus inmuebles" action="inmoblesUsuari" >
								<f:setPropertyActionListener target="#{inmobleForm.cercable}" value="false" />
							</h:commandLink>
						</h:panelGroup>
						
					</h:panelGrid>
					
				</h:form>
				
			</rich:panel>
			
		</h:panelGrid>
												
	</c:if>
		
</ui:composition>

